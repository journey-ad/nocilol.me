---
title: ä½¿ç”¨DNSéš§é“ç»•è¿‡æ ¡å›­ç½‘è®¤è¯
date: 2018-09-04 02:37:00
categories: lab
tags: [æ ¡å›­ç½‘,DNSéš§é“,SSH]
urlname: using-dns-tunnel-to-bypass-campus-network-authentication
---
![ã‚ãŸã„ãŒãƒ»ãƒ»ãƒ»æ¥ãŸããããï¼ @ ç„æœˆã¡ã²ã‚](https://img.imjad.cn/images/2018/09/04/66192197_p0.jpg)

{% cplayer %}
- 751472
{% endcplayer %}

## ä¸€ç‚¹~~å¤§èƒ†çš„~~æƒ³æ³•

[å‰å‡ æ—¥åˆ†æå®Œæ ¡å›­ç½‘çš„ç™»å½•è®¤è¯è¿‡ç¨‹](https://imjad.cn/archives/lab/giwifi-auth-process-analysis-and-simulation-login)ä¹‹åå·²ç»è¿‡äº†å‡ å¤©ï¼Œè¿‘æ—¥çªå‘å¥‡æƒ³ï¼Œæƒ³è¯•ç€èƒ½ä¸èƒ½ç»•è¿‡æ ¡å›­ç½‘çš„è¿™ä¸ªç½‘é¡µè®¤è¯ï¼Œå®ç°è¯¸å¦‚å…è´¹ä¸Šç½‘ã€åœ¨ä¸Šç½‘åŒºé—´å¤–ä¸Šç½‘ç­‰çš„æ“ä½œ

ç”±äºæœ¬äººå¯¹webå®‰å…¨æ–¹é¢æ‰€çŸ¥ç”šå°‘ï¼Œé‚åˆæ˜¯ä¸€ç•ªæœå¯»ï¼Œå‘ç°åœ¨æ­¤ä¹‹å‰å·²ç»æœ‰è®¸å¤šå…ˆè¾ˆå®Œæˆäº†è¿™æ–¹é¢çš„ç›®æ ‡ã€‚è‡ªå·±ä¹Ÿè¯•ç€æŠ˜è…¾äº†ä¸€é€š

äºæ˜¯ä¾¿æ‹¾äººç‰™æ…§ï¼Œå‡‘æˆè¿™ç¯‡æ–‡ç« 


## æŠ€æœ¯åŸç†

ç»è¿‡ä¸€ç•ªæœå¯»ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€äº›æ–¹æ³•ã€‚è€Œè¿™äº›æ–¹æ³•ï¼Œè™½è¯´ç”¨çš„è½¯ä»¶å·¥å…·å„ä¸ç›¸åŒï¼Œä½†æ€»ä½“çœ‹ä¸‹æ¥ï¼Œåˆ©ç”¨çš„éƒ½æ˜¯ä¸€ä¸ªåŸç†ï¼š

ä¸ºäº†å®ç°ç½‘é¡µè®¤è¯ï¼Œç½‘å…³è®¾å¤‡å¿…é¡»è¦ç»™ç»ˆç«¯åˆ†é…IPï¼ŒåŒæ—¶åŠ«æŒ80ã€443ç«¯å£çš„æ•°æ®åŒ…å¹¶è·³è½¬è‡³è®¤è¯é¡µ(è¿™ä¹Ÿæ˜¯httpé¡µæ‰èƒ½è·³è½¬è‡³è®¤è¯é¡µçš„åŸå› ï¼Œhttpså°†ä¼šæ— æ³•è·³è½¬æˆ–æŠ¥è¯ä¹¦é”™è¯¯)ã€‚åœ¨è®¤è¯é€šè¿‡åæ”¾è¡Œè¿™ä¸¤ä¸ªç«¯å£ï¼Œå…¶ä»–çš„ç«¯å£ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½†ä¸€èˆ¬æƒ…å†µä¸‹æœ‰ä¸€äº›ç«¯å£å´å¹¶éå¦‚æ­¤ï¼Œæ¯”å¦‚æœ¬æ–‡çš„ä¸»è§’â€”â€”UDP 53ç«¯å£

> ç±»ä¼¼è¿™æ ·çš„ç«¯å£è¿˜æœ‰ä¸€äº›ï¼Œæ¯”å¦‚UDP 67ï¼Œç”¨äºDHCP

å­¦è¿‡è®¡ç®—æœºç½‘ç»œåŸºç¡€çŸ¥è¯†çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œåœ¨UDP 53ä¸Šè¿è¡Œçš„æ˜¯DNSåè®®ï¼ŒåŸŸåè§£æçš„æ•°æ®åŒ…å°±é€šè¿‡è¿™ä¸ªç«¯å£è¿›è¡Œä¼ è¾“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç½‘å…³éƒ½ä¼šæ”¾è¡Œè¿™ä¸ªç«¯å£çš„UDPé€šä¿¡ï¼Œç”šè‡³æ˜¯æ•´ä¸ªç«¯å£(æ³¨æ„æ˜¯ä¸€èˆ¬æƒ…å†µï¼Œè¿™ç‚¹ä¹‹åä¼šè¯¦ç»†è¯´æ˜)ã€‚å¯¹äºæ­¤ç±»ç½‘å…³ï¼Œè¦ç»•è¿‡è®¤è¯å°±å¾ˆç®€å•äº†ï¼Œåªéœ€ä¸€å°ä½¿ç”¨53ç«¯å£é€šä¿¡çš„ä»£ç†æœåŠ¡å™¨å³å¯ã€‚è¿™ç§æƒ…å†µè¿‡äºç®€å•ï¼Œæ²¡æœ‰å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« çš„å¿…è¦ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è°ˆä¸€è°ˆé‚£äº›ã€Œéä¸€èˆ¬ã€çš„æƒ…å†µ(æˆ‘æ ¡æ­£æ˜¯è¿™ç§æƒ…å†µğŸŒ)

éƒ¨åˆ†ç½‘å…³è™½ç„¶æ”¾è¡Œäº†53ç«¯å£ï¼Œå´åœ¨ç½‘å…³å¤„åŠ«æŒäº†53ç«¯å£çš„é€šä¿¡ï¼Œè¿™ä½¿å¾—ç»ˆç«¯çš„æ•°æ®æ ¹æœ¬åˆ°è¾¾ä¸äº†è¿œç«¯ï¼ŒDNSè§£æè¯·æ±‚ä¼šè¢«ç½‘å…³æŠ¢ç­”ï¼Œè€Œå…¶ä»–æ•°æ®åˆ™æ˜¯ç›´æ¥ä¸¢å¼ƒã€‚è¡¨ç°å°±æ˜¯ä½¿ç”¨`nslookup`ç­‰å‘½ä»¤èƒ½æŸ¥è¯¢åˆ°æ­£ç¡®çš„è§£æç»“æœï¼Œä½¿ç”¨`tcping`ç­‰TCPæ•°æ®åŒ…æµ‹è¯•å·¥å…·ä¹Ÿèƒ½çœ‹åˆ°ç«¯å£å¼€æ”¾ï¼Œå»¶è¿Ÿå´æ˜¯ç¥å¥‡çš„1ms(å³æœ¬æœºåˆ°ç½‘å…³çš„å»¶è¿Ÿ)

é‚£ä¹ˆå°±æ²¡æœ‰åŠæ³•äº†å—ï¼Ÿéä¹Ÿï¼Œè¦çŸ¥é“åŠ³åŠ¨äººæ°‘çš„æ™ºæ…§æ˜¯æ— ç©·çš„ï¼Œä¸ºäº†èƒ½å¤Ÿå…è´¹ä¸Šç½‘ï¼Œè¿™äº›æå®¢ä»¬å‘æ˜äº†è®¸å¤šç¥å¥‡çš„ï¼Œå ªç§°é»‘ç§‘æŠ€çš„ï¼Œç”šè‡³ç»†ç»†å“å‘³ä¸€ç•ªä¼šå‘ç°æœ‰äº›æç¬‘çš„æ–¹æ³•ã€‚

*è¿™æ®µæ˜¯åœ¨è°ƒä¾ƒï¼Œã€Œå…è´¹ä¸Šç½‘ã€åªæ˜¯è¡¨é¢ï¼ŒèƒŒåçš„æ€æƒ³åŠæŠ€æœ¯éªŒè¯æ‰æ˜¯æœ€å¯è´µçš„*

æ¯”å¦‚ç»™æˆ‘ä¸ªäººå°è±¡é¢‡æ·±çš„åˆ©ç”¨ICMPæŠ¥æ–‡(å³`ping`å‘½ä»¤çš„æ•°æ®åŒ…)å’Œæœ¬æ–‡ä»‹ç»çš„åˆ©ç”¨DNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡æ¥è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œè¿™ä¸¤ç§é€šä¿¡æ–¹å¼è¢«å½¢è±¡çš„ç§°ä¸ºã€ŒPINGéš§é“ã€å’Œã€ŒDNSéš§é“ã€

ä½†éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹æ³•è™½ç„¶å®è·µè¯æ˜å¯è¡Œï¼Œä½†ç”±äºå¯¹åº”çš„åè®®è®¾è®¡ä¸æ˜¯ç”¨æ¥ä¼ è¾“æ•°æ®çš„ï¼Œå¼ºè¡Œä½¿å…¶æ”¯æŒæ•°æ®ä¼ è¾“åï¼Œé€Ÿåº¦ä¹Ÿæ˜¯æ…¢çš„ç¦»è°±ï¼Œå¹¶ä¸”å¤§é‡é¢‘ç¹çš„Pingè¯·æ±‚æˆ–DNSæŸ¥è¯¢ä¹Ÿå¾ˆå®¹æ˜“è¢«ç”„åˆ«ä¸ºå¼‚å¸¸æµé‡ä»è€Œé­åˆ°å°é”ã€‚å› æ­¤æœ¬æ–‡çš„æ„ä¹‰æ›´åœ¨äºã€ŒæŠ˜è…¾ã€çš„è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ç»“æœã€‚~~ä¹°ä¸€å¼ æ— é™æµé‡å¡å¼€çƒ­ç‚¹ï¼Œç›¸æ¯”è¿™äº›ä½“éªŒè¦å¼ºå¤šäº†ï¼Œæ¯•ç«Ÿèƒ½ç”¨é’±è§£å†³çš„äº‹éƒ½ä¸ç®—äº‹å˜›~~~


## DNSéš§é“

å®ç°DNSéš§é“æœ‰è®¸å¤šç§æ–¹æ³•ï¼Œè¿™é‡Œä½¿ç”¨å·¥å…·**dns2tcp**æ¥å®ç°

è¿™ç§æ–¹æ³•éœ€è¦ä¸€å°Linuxç³»ç»Ÿçš„å¤–éƒ¨VPSæ¥ä½œä¸ºä»£ç†æœåŠ¡å™¨ã€ä¸€ä¸ªå¯é…ç½®NSè§£æçš„åŸŸåä½œä¸ºä¼ è¾“ä¸­ä»‹

**å¦è¯·æ³¨æ„ï¼Œæœ¬æ–‡å‡ºç°çš„é…ç½®æ–‡ä»¶åŠå‘½ä»¤çš„å‚æ•°å€¼ä¸å¯ç›´æ¥å¥—ç”¨ï¼Œéœ€æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹**

### åœ¨åŸŸåè§£æé¢æ¿çš„æ“ä½œ

å›½å†…æ”¯æŒNSè®°å½•è§£æçš„DNSè§£ææœåŠ¡æ®æˆ‘æ‰€çŸ¥æœ‰DNSPodå’ŒCloudXNSï¼Œè¿™é‡Œä½¿ç”¨CloudXNS

å¦‚å›¾æ‰€ç¤ºï¼Œéœ€è¦æ·»åŠ ä¸¤æ¡è®°å½•ï¼š

ä¸€æ¡Aè®°å½•ï¼Œä¸»æœºåä»»æ„ï¼Œè¿™é‡Œä½¿ç”¨`temp1`ï¼Œå€¼ä¸ºVPSçš„IP

ä¸€æ¡NSè®°å½•ï¼Œä¸»æœºåä»»æ„ä½†éœ€ç‰¢è®°ï¼Œè¿™é‡Œä½¿ç”¨`dns2tcp`ï¼Œå€¼ä¸ºAè®°å½•çš„ä¸»æœºåå¯¹åº”çš„å®Œæ•´åŸŸåï¼Œè¿™é‡Œæ˜¯`temp1.nocilol.me`

![åŸŸåè§£æ](https://img.imjad.cn/images/2018/09/04/sp180903_230655.png)


### åœ¨æœåŠ¡ç«¯çš„æ“ä½œ

#### é˜²ç«å¢™é…ç½®

é¦–å…ˆéœ€è¦åœ¨å®‰å…¨ç»„å’Œé˜²ç«å¢™è§„åˆ™ä¸­æ”¾è¡Œ53ç«¯å£çš„UDPè¿æ¥ï¼Œå®‰å…¨ç»„å‚è€ƒå„IDCçš„é…ç½®æ•™ç¨‹ï¼Œé˜²ç«å¢™è‹¥ä½¿ç”¨iptablesçš„è¯ï¼Œæ·»åŠ å¦‚ä¸‹è§„åˆ™ï¼š

```shell
-A INPUT -p udp -m udp --dport 53 -j ACCEPT
-A OUTPUT -p udp -m udp --sport 53 -j ACCEPT
```


#### å®‰è£…dns2tcp

ä¸€èˆ¬Linuxå‘è¡Œç‰ˆçš„è½¯ä»¶ä»“åº“é‡Œéƒ½å¸¦äº†dns2tcpï¼Œç›´æ¥å®‰è£…å³å¯ï¼Œè‹¥æ— çš„è¯å¯ä»¥è‡ªè¡Œç¼–è¯‘ï¼Œé¡¹ç›®åœ°å€ä¸º[alex-sector/dns2tcp](https://github.com/alex-sector/dns2tcp)

*Windowsç³»ç»Ÿä¸æ”¯æŒdns2tcpçš„æœåŠ¡ç«¯dns2tcpdï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„*

åœ¨Debianç³»çš„å‘è¡Œç‰ˆä¸­ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å®‰è£…ï¼š

```shell
# apt install dns2tcp
```

å·¥å…·ä¸å¤§ï¼Œå¾ˆå¿«å°±ä¼šå®‰è£…å®Œæ¯•


#### é…ç½®dns2tcpd

é…ç½®æ–‡ä»¶é»˜è®¤ç›®å½•ä¸º`~/.dns2tcpdrc`ï¼Œä¹Ÿå¯åœ¨éšåå¯åŠ¨`dns2tcpd`æ—¶ä»¥`-f`å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„

é…ç½®æ–‡ä»¶å†…å®¹ä¸ºï¼š

```
listen = 0.0.0.0
port = 53
user = nobody
key = your_own_password
chroot = /tmp
domain = dns2tcp.nocilol.me
resources = ssh:127.0.0.1:22 , smtp:127.0.0.1:25
```

å…¶ä¸­çš„`key`å­—æ®µå€¼ä¸ºå£ä»¤ï¼Œå¯ä»¥é˜²æ­¢ä¸çŸ¥é“å£ä»¤çš„äººè¿æ¥åˆ°æœ¬æœºçš„dns2tcpæœåŠ¡


#### è¿è¡Œdns2tcpd

è°ƒç”¨è¯´æ˜

```
Usage : dns2tcpd [ -i IP ] [ -F ] [ -d debug_level ] [ -f config-file ] [ -p pidfile ]
         -F : dns2tcpd will run in foreground
```

æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æµ‹è¯•å¯åŠ¨æœåŠ¡ç«¯è¿›ç¨‹ï¼š

```shell
# dns2tcpd -F -d 1
```

å¦‚æœé…ç½®æ–‡ä»¶æ— è¯¯ï¼Œåº”å½“ä¼šè¾“å‡ºç±»ä¼¼å¦‚ä¸‹çš„å†…å®¹ï¼š

```shell
15:45:14 : Debug options.c:97   Add resource ssh:127.0.0.1 port 22
15:45:14 : Debug options.c:97   Add resource smtp:127.0.0.1 port 25
15:45:14 : Debug socket.c:55    Listening on 0.0.0.0:53 for domain dns2tcp.nocilol.me
Starting Server v0.5.2...
15:45:14 : Debug main.c:132     Chroot to /tmp
15:45:14 : Debug main.c:142     Change to user nobody
```

å®é™…ä½¿ç”¨æ—¶æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼åœ¨åå°è¿è¡Œï¼š

```shell
# dns2tcpd -d 1
```


### åœ¨å®¢æˆ·ç«¯çš„æ“ä½œ

ä»è¿™ä¸€æ­¥å¼€å§‹å°±å¯ä»¥æ–­ç½‘æ“ä½œäº†ï¼Œæ–­ç½‘æŒ‡çš„æ˜¯è¿æ¥çƒ­ç‚¹æˆ–æ’ä¸Šç½‘çº¿ï¼Œä½†ä¸è¿›è¡Œè®¤è¯çš„çŠ¶æ€

dns2tcpçš„å®‰è£…è¿‡ç¨‹ä¸å†èµ˜è¿°ï¼ŒWindowsç³»ç»Ÿç”¨æˆ·å¯ä»¥è‡ªè¡Œä»æºä»£ç ç¼–è¯‘æˆ–åœ¨[è¿™ä¸ªé¡µé¢](http://azertyfab.free.fr/dns2tcp/)ç›´æ¥ä¸‹è½½åˆ°ç¼–è¯‘å¥½çš„dns2tcpc.exe

#### é…ç½®dns2tcpc

é…ç½®æ–‡ä»¶é»˜è®¤ç›®å½•ä¸º`~/.dns2tcpdrc`ï¼Œä¹Ÿå¯åœ¨éšåå¯åŠ¨`dns2tcp`æ—¶ä»¥`-f`å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„

é…ç½®æ–‡ä»¶å†…å®¹ä¸ºï¼š

```
domain = dns2tcp.nocilol.me
resource = ssh
local_port = 2222
debug_level = 2
key = your_own_password
# server = your_vps_ip
```


#### è¿è¡Œdns2tcpc

è°ƒç”¨è¯´æ˜

```
dns2tcp v0.5.2 ( http://www.hsc.fr/ )
Usage : dns2tcpc [options] [server] 
	-c         	: enable compression
	-z <domain>	: domain to use (mandatory)
	-d <1|2|3>	: debug_level (1, 2 or 3)
	-r <resource>	: resource to access
	-k <key>	: pre-shared key
	-f <filename>	: configuration file
	-l <port|->	: local port to bind, '-' is for stdin (mandatory if resource defined without program )
	-e <program>	: program to execute
	-t <delay>	: max DNS server's answer delay in seconds (default is 3)
	-T <TXT|KEY>	: DNS request type (default is TXT)
	server	: DNS server to use
	If no resources are specified, available resources will be printed
```

æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æµ‹è¯•ä¸æœåŠ¡ç«¯çš„è¿æ¥æ˜¯å¦é€šç•…ï¼š

```shell
$ dns2tcpc -z dns2tcp.nocilol.me -d 3 -k your_own_password
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°†è¾“å‡ºç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š

```
Available connection(s) : 
	ssh
	smtp

Note : Compression SEEMS available !
No DNS given, using 223.5.5.5 (first system preferred DNS server)
debug level 3
Debug socket.c:233	Create socket for dns : '223.5.5.5' 
Debug session.c:46	Request challenge
Debug requests.c:146	Sending dns id = 0x3f0b
Debug requests.c:97	Query is AAAAABV/AA.=auth.dns2tcp.nocilol.me len 35
Debug rr.c:106	rr_decode_next_reply_encode base64 data was = AQUAABV/AFkxN0pEMEpZT0dUR1lJUUI (reply len = 34)
Debug session.c:53	Challenge = 'Y17JD0JYOGTGYIQB'
Debug session.c:54	Session created (0x501)
Debug session.c:77	Sending response : '11F5Ab37A7DE310AC28F396B75E45B186D24AB39' (key = your_own_password) 
Debug requests.c:146	Sending dns id = 0xd21f
Debug requests.c:97	Query is AQWBgAABADExRjVBQzE3QTdERTMzMEFDMjlGNzM2Qjc1RTQzNzE1NkIyNEFCNjk.=auth.dns2tcp.nocilol.me len 88
Debug rr.c:106	rr_decode_next_reply_encode base64 data was = AQWBgAABAA (reply len = 13)
Debug auth.c:58	Requesting resource
Debug requests.c:146	Sending dns id = 0x2e29
Debug requests.c:97	Query is AQWPJOMjAA.=resource.dns2tcp.nocilol.me len 39
Debug rr.c:106	rr_decode_next_reply_encode base64 data was = 1FwCb/x/AHNzaA (reply len = 17)
Debug rr.c:106	rr_decode_next_reply_encode base64 data was = 1FwCb/x/AHNtdHA (reply len = 18)
```

å¦‚æœè¾“å‡ºç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼Œè¯·æ£€æŸ¥æ“ä½œæ˜¯å¦æœ‰è¯¯ï¼Œè‹¥æ“ä½œæ— è¯¯ï¼Œè¯·ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ŒDNSè§£æç¼“å­˜éœ€è¦ä¸€å®šæ—¶é—´æ¥åˆ·æ–°å’Œä¼ é€’ï¼š

```
No DNS given, using 223.5.5.5 (first system preferred DNS server)
debug level 3
Debug socket.c:233	Create socket for dns : '223.5.5.5' 
Debug session.c:46	Request challenge
Debug requests.c:146	Sending dns id = 0xbc7b
Debug requests.c:97	Query is AAAAAOt7AA.=auth.dns2tcp.nocilol.me len 35
No response from DNS 223.5.5.5
```

æµ‹è¯•æˆåŠŸä¹‹åï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤å¯åŠ¨å®¢æˆ·ç«¯è¿›ç¨‹ï¼š

```shell
$ dns2tcpc
```

å°†ä¼šè¾“å‡ºç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š

```
debug level 2
Debug socket.c:233	Create socket for dns : '223.5.5.5' 
Listening on port : 2222
When connected press enter at any time to dump the queue
```

ä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£æ‰“å¼€ï¼Œä¸è¦å…³é—­


#### è½¬æ¢ä¸ºSOCKS v5é€šç”¨ä»£ç†

##### Linux

æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£å¹¶æ‰§è¡Œä¸‹åˆ—å‘½ä»¤~~æ˜¯ä¸æ˜¯æœ‰ç‚¹ä¼¼æ›¾ç›¸è¯†~~ï¼š

```shell
$ ssh user@127.0.0.1 -p 2222 -D 2333
```

##### Windows

ä½¿ç”¨SSHè¿æ¥å·¥å…·çš„éš§é“åŠŸèƒ½ï¼Œè¿™é‡Œç»™ä¸€ä¸ªXshellçš„é…ç½®ç¤ºä¾‹ï¼š

![è¿æ¥è‡³dns2tcpcè½¬å‘çš„sshç«¯å£](https://img.imjad.cn/images/2018/09/04/sp180904_095832.png)


![SSHéš§é“é…ç½®](https://img.imjad.cn/images/2018/09/04/sp180904_095617.png)

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼ŒSSHéš§é“å°†è¿æ¥æˆåŠŸï¼ŒåŒæ—¶å¯ä»¥è§‚å¯Ÿåˆ°dns2tcpcçš„ç»ˆç«¯æ‰“å°å‡ºå¤§é‡æ—¥å¿—ä¿¡æ¯


#### é…ç½®ç³»ç»Ÿä»£ç†æˆ–è½¯ä»¶ä»£ç†

åœ¨ç³»ç»Ÿæˆ–è½¯ä»¶çš„ä»£ç†è®¾ç½®ä¸­é…ç½®ä¸ºSOCKS v5ï¼Œåœ°å€`127.0.0.1`ï¼Œç«¯å£`2333`

å…·ä½“é…ç½®æ–¹æ³•ä¸å†è¯¦è¿°ï¼Œå®Œæˆåå³å¯æ­£å¸¸ä¸Šç½‘


## ä½“éªŒå¦‚ä½•

é¦–å…ˆæ³¼ä¸€ç›†å‡‰æ°´ï¼Œä½“éªŒå¯ä»¥ç”¨ã€Œç³Ÿç³•ã€æ¥å½¢å®¹:(

æœ¬æ–‡å¼€å¤´æ›¾æåˆ°ï¼šã€Œâ€¦è™½ç„¶å®è·µè¯æ˜å¯è¡Œï¼Œä½†ç”±äºå¯¹åº”çš„åè®®è®¾è®¡ä¸æ˜¯ç”¨æ¥ä¼ è¾“æ•°æ®çš„ï¼Œå¼ºè¡Œä½¿å…¶æ”¯æŒæ•°æ®ä¼ è¾“åï¼Œé€Ÿåº¦ä¹Ÿæ˜¯æ…¢çš„ç¦»è°±ï¼Œå¹¶ä¸”å¤§é‡é¢‘ç¹çš„Pingè¯·æ±‚æˆ–DNSæŸ¥è¯¢ä¹Ÿå¾ˆå®¹æ˜“è¢«ç”„åˆ«ä¸ºå¼‚å¸¸æµé‡ä»è€Œé­åˆ°å°é”ã€‚ã€

è€Œå…·ä½“ä½“éªŒå¦‚ä½•ï¼Œæˆ‘å°±è´´ä¸¤å¼ å›¾å§ï¼Œä¸€åˆ‡å°½åœ¨ä¸è¨€ä¸­ğŸŒ

![æµè§ˆå™¨çš„ä¸‹è½½é€Ÿåº¦](https://img.imjad.cn/images/2018/09/04/TIM20180904101615.png)

![ç™¾åº¦é¦–é¡µé¦–æ¬¡åŠ è½½æ—¶é—´](https://img.imjad.cn/images/2018/09/04/TIM20180904101626.png)


è™½ç„¶ä½“éªŒä¸å°½å¦‚äººæ„ï¼Œä½†æ˜¯ç”Ÿå‘½åœ¨äºæŠ˜è…¾å˜›ã€‚åœ¨æŠ˜è…¾çš„è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿäº†è§£åˆ°åœ¨å°å°çš„Webè®¤è¯çš„èƒŒåè¿˜æœ‰å¦‚æ­¤å¤šçš„ã€æœ‰è¶£çš„çŸ¥è¯†ï¼Œæ¯”èµ·æœ€åˆçš„ç›®çš„è€Œè¨€ï¼Œè¦é‡è¦çš„å¤šäº†ã€‚

äººç”Ÿä¹Ÿåº”å¤§æŠµå¦‚æ­¤å§


## å‚è€ƒ

[é€è¿‡DNS Tunnelç»•è¿‡æ ¡å›­ç½‘è®¤è¯ç³»ç»Ÿå®ç°å…è´¹ä¸Šç½‘](https://qiuri.org/posts/2152501839/)

[ç»•è¿‡æ ¡å›­ç½‘WEBè®¤è¯_dns2tcpå®ç°](https://www.cnblogs.com/nkqlhqc/p/7805837.html)