<!DOCTYPE html>
<html lang="zh">
<!--
             -. .                                        
       _____   ',' ,                                    
     ,'     ,'   ', ',                                  
   ,'     ,'      |  |                                  
   \       \       |  |                                  
     \ /^\   \    ,' ,'                                  
           \   \ ,' ,'      L'Internationale,            
     / ~-.___\.-'  ,'            Sera le genre humain.   
   /   .______.- ~ \                                     
 /   /'          \   \                                   
 \./               \/'                                   
                                                         
-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="/favicon.png" type="image/png">
    <title>GiWiFIæ ¡å›­ç½‘è®¤è¯è¿‡ç¨‹åˆ†æä¸æ¨¡æ‹Ÿç™»å½• - æ¶é­”èè‰æ§</title>
    
      
<link rel="stylesheet" href="/css/style.css">

      
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

      
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

      
<link rel="stylesheet" href="/libs/zpix/zpix.css">

      
<script src="/js/theme.js"></script>

    
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="æ¶é­”èè‰æ§" type="application/atom+xml">
</head>

<body id="bodyx" path="archives/lab/giwifi-auth-process-analysis-and-simulation-login/">
    <div class="hd posts">
    <a class="back" href="javascript:void(0);" target="_self"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <h1 class="post-title">GiWiFIæ ¡å›­ç½‘è®¤è¯è¿‡ç¨‹åˆ†æä¸æ¨¡æ‹Ÿç™»å½•</h1>
    <hr>

    
        <div class="outdated-notify">
            æœ¬æ–‡å‘å¸ƒäº <span class="num">-</span> å¤©å‰ï¼Œæ–‡ä¸­æ‰€æè¿°çš„ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜æˆ–æ˜¯è¿‡æ—¶ï¼Œè¯·æ³¨æ„è¾¨åˆ«
        </div>
    

    <div class="post-content">
        <p><img src="https://img.imjad.cn/images/2018/08/29/67802201_p0.jpg" alt="ãƒã‚·ãƒ¥ãƒãƒ­ã‚’é£Ÿã¹ã•ã›ã‚ã†ã€ãªã§ã‚Šã‚“ @ ç›¸å·ã‚Šã‚‡ã†"></p>

    <div class="cplayer-template"
      id="cplayer-84393480"
      data-id="cplayer-84393480"
      data-playlist=%5B%7B%22name%22%3A%22loading...%22%2C%22artist%22%3A%22loading...%22%7D%5D
      data-ids=[34003631]
      data-autoplay="false"
      style="position: relative"
    ></div>
    <script>
      (function(){

        let getLyric = id => {
          return new Promise((resolve, reject) => {
            fetch("https://api.imjad.cn/cloudmusic/?type=lyric&id=" + id).then(res => {
              return res.json()
            }).then(data => {
              // console.log(data)
              if(!data.lrc){
                data = Object.assign(data, {
                  lrc: {lyric: '[00:00.00]æ‰¾ä¸åˆ°æ­Œè¯çš„è¯´â€¦(âŠ™ï¹âŠ™)[99:00.00]'},
                  tlyric: {lyric: '[00:00.00]ç¿»è¯‘ä¸å­˜åœ¨çš„è¯´â€¦â•®(â•¯â–½â•°)â•­[99:00.00]'}
                })
              }
              let obj = {
                lyric: data.lrc.lyric,
                tlyric: data.tlyric.lyric
              }
              resolve(obj);
            })
          })
        }

        function loadcplayer() {
          if (typeof window.cplayerList === 'undefined') window.cplayerList = {};
          if (typeof window.cplayerList["cplayer-84393480"] !== 'undefined') return;
          if (!cplayer.prototype.add163) cplayer.prototype.add163 = async function add163(id) {
            if (!id) throw new Error("Unable Property.");
            let lyric = await getLyric(id);
            // console.log(lyric)

            return fetch("https://api.imjad.cn/cloudmusic/?type=detail&id=" + id).then(function(res){return res.json()}).then(function(data){
              let obj = {
                name: data.songs[0].name,
                artist: data.songs[0].ar.map(function(ar){ return ar.name }).join(','),
                poster: data.songs[0].al.picUrl,
                lyric: lyric.lyric,
                sublyric: lyric.tlyric,
                src: 'https://api.imjad.cn/cloudmusic/?type=song&raw=true&id=' + id
              }
              this.add(obj);
              return obj;
            }.bind(this))
          }

          window.cplayerList["cplayer-84393480"] = new cplayer({
            element: document.getElementById("cplayer-84393480"),
            playlist: [{"name":"loading...","artist":"loading..."}],
            generateBeforeElement: false,
            deleteElementAfterGenerate: false,
            autoplay: false,
            zoomOutKana: true,
            style: `c-player {
                      font-size: 16px !important;
                      position: relative;
                      left: 50%;
                      transform: translateX(-50%);
                      width: auto;
                      max-width: 550px;
                      margin: 30px auto;
                    }
                    c-player .cp-controls{
                      user-select: none;
                    }
                    c-player .cp-lyric{
                      width: 100%;
                      margin: 0.41667em 0;
                    }
                    c-player .cp-play-button .cp-play-icon.cp-play-icon-paused {
                      margin-left: 0.8em;
                    }
                    c-player .cp-drop-down-menu {
                      line-height: 1.85;
                    }
                    @media (max-width: 768px) {
                      c-player{
                        font-size: 12px !important;
                        left: auto;
                        transform: none;
                        width: 100%;
                        margin: 10px auto;
                      }
                      c-player .cp-mainbody{
                        min-height: 5.16667em;
                      }
                      c-player .cp-poster{
                        width: 5.16667em;
                        height: 5.16667em;
                      }
                      c-player .cp-center-container{
                        height: 5.16667em;
                      }
                      c-player .cp-play-button, c-player .cp-volume-button, c-player .cp-prev-button, c-player .cp-list-button, c-player .cp-mode-button, c-player .cp-next-button{
                        width: 1.54167em;
                        height: 1.54167em;
                      }
                      c-player .cp-icon, c-player .cp-prev-icon, c-player .cp-next-icon, c-player .cp-volume-icon, c-player .cp-random-icon, c-player .cp-single-icon, c-player .cp-loop-icon, c-player .cp-list-icon{
                        height: 1.54167em;
                        width: 1.54167em;
                      }
                      c-player .cp-play-button{
                        height: 2.8em;
                        width: 2.8em;
                      }
                      c-player .cp-play-button .cp-play-icon{
                        margin: 0.8em;
                      }
                      c-player .cp-play-button .cp-play-icon.cp-play-icon-paused {
                        margin: 0.7875em;
                        margin-left: 1em;
                      }
                      c-player .cp-volume-icon {
                        width: 1.76667em;
                      }
                      c-player .cp-list-button {
                        width: 1.54167em;
                        height: 1.54167em;
                      }
                      c-player .cp-mode-button {
                        width: 1.54167em;
                        height: 1.54167em;
                      }
                    }
                    `
          });

          window.cplayerList["cplayer-84393480"].add163(34003631)

          let player = window.cplayerList["cplayer-84393480"]
          player.to(1)
          player.remove(player.playlist[0])
        }
        
        if (typeof window.cplayer === 'undefined' && !document.getElementById("cplayer-script")) {
          var js = document.createElement("script");
          js.src = 'https://cdn.jsdelivr.net/gh/MoePlayer/cPlayer/dist/cplayer.js';
          js.id = "cplayer-script";
          js.addEventListener("load", loadcplayer);
          document.body.appendChild(js);
        } else {
          window.addEventListener("load", loadcplayer);
        }
      })()
    </script>

<h2>é—²è¯</h2><p>æ–°å­¦æœŸå¼€å­¦ä¹‹åï¼Œå‘ç°å­¦æ ¡åˆä¸çŸ¥ä»å“ªé‡Œå¼•è¿›äº†ä¸€å¥—æ–°çš„æ ¡å›­ç½‘ç»œè®¤è¯ç³»ç»Ÿï¼Œå«åšGiWiFiï¼Œæœ‰æ—¶å€™åˆè¢«å«åšGWiFi <del>GayWiFi</del></p>
<p>æ–°çš„è®¤è¯ç³»ç»Ÿä¸åŒäºä¹‹å‰çš„å®½å¸¦æ‹¨å·çš„å½¢å¼ï¼Œè€Œæ˜¯ç›´æ¥è¿æ¥è‡³ç½‘å…³è®¾å¤‡ï¼Œç„¶åé€šè¿‡ç½‘é¡µ/å®¢æˆ·ç«¯è®¤è¯ã€‚ä½†ä¸çŸ¥ç”±äºä»€ä¹ˆ<del>ä¸å¯å‘Šäººçš„</del>åŸå› ï¼Œç½‘é¡µè®¤è¯ä»…å¼€æ”¾äº†åŠå¤©ï¼Œéšåä¾¿åªèƒ½ä¸‹è½½å®¢æˆ·ç«¯è®¤è¯äº†</p>
<p>å®¢æˆ·ç«¯å¼•å¯¼ä¸‹è½½é¡µå¯¹äºä¸åŒçš„è®¾å¤‡å’Œç³»ç»Ÿä½¿ç”¨äº†UAè¿›è¡ŒåŒºåˆ†ï¼Œç»è¿‡æµ‹è¯•ï¼Œæä¾›çš„å®¢æˆ·ç«¯æœ‰Windowsã€macOSã€iOSä»¥åŠAndroidç‰ˆæœ¬ï¼ˆæœç„¶Linuxåˆè¢«å¿½è§†äº†ï¼Œæ˜¾ç¤ºçš„æ˜¯Androidç‰ˆçš„ä¸‹è½½æŒ‰é’®ğŸŒï¼‰</p>
<p>ç”±äºå¯¹æ­¤ç±»è®¤è¯å®¢æˆ·ç«¯çš„æ’æ–¥å’Œå¿ƒç†æ´ç™–ï¼Œæˆ‘ä¾¿å¼€å§‹å¯»æ‰¾ä½¿ç”¨ç½‘é¡µè®¤è¯ï¼Œç”šè‡³æ˜¯ä½¿ç”¨è„šæœ¬æ¨¡æ‹Ÿè®¤è¯çš„æ–¹æ³•ï¼Œæœä¸å…¶ç„¶ï¼Œç»è¿‡ä¸€ç•ªåˆ†æä¸æœå¯»ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€äº›ä¸œè¥¿</p>
<h2>ä½ è—å¾—å¥½æ·±å•Šï¼Œç™»å½•æ¡†</h2><p>ä¸Šé¢è¯´åˆ°ç½‘é¡µè®¤è¯å¼€æ”¾åŠå¤©åå°±è¢«æ— æƒ…å…³é—­ï¼Œé‚£ä¹ˆå°±å…ˆæ¥æ‰¾å›æ¶ˆå¤±çš„ç™»å½•æ¡†å§~</p>
<p>æ­¤å‰çš„è®¤è¯è¿‡ç¨‹ä¸º</p>
<ol>
<li>æ‰“å¼€ä»»æ„httpé¡µé¢åè¢«åŠ«æŒè‡³<code>172.17.1.1:8062/redirect</code></li>
<li>è¿”å›307è·³è½¬è‡³è®¤è¯é¡µ</li>
<li>åœ¨è®¤è¯é¡µé‡Œè¾“å…¥è´¦å·å¯†ç ç™»å½•è®¤è¯</li>
<li>å…³é—­è®¤è¯é¡µï¼Œä¸€æ®µæ—¶é—´å†…å³å¯æ­£å¸¸ä¸Šç½‘</li>
</ol>
<p>è€Œç°åœ¨è·³è½¬åä»…æ˜¾ç¤ºå®¢æˆ·ç«¯çš„ä¸‹è½½æŒ‰é’®ï¼Œç›´è§‰æ„è¯†åˆ°è¿™æ˜¯ä¸€ä¸ªä¸“ç”¨äºå®¢æˆ·ç«¯å¼•å¯¼ä¸‹è½½çš„é¡µé¢ï¼ŒçœŸæ­£çš„è®¤è¯é¡µä»å¦è—ä»–å¤„</p>
<p>äº‹å®æ­£æ˜¯å¦‚æ­¤ï¼Œå¯¹æ¯”å†å²è®°å½•ï¼Œç°åœ¨çš„è·³è½¬é¡µé¢çš„åŸŸåæ˜¯<code>172.17.1.1</code>(æ ¡å›­ç½‘ç½‘å…³IP)ï¼Œæ­¤å‰çš„è®¤è¯é¡µåˆ™æ˜¯<code>http://login.gwifi.com.cn/cmps/admin.php/api/login/</code></p>
<p>å°†å®¢æˆ·ç«¯å¼•å¯¼ä¸‹è½½é¡µçš„URLå‚æ•°ç²˜è´´åˆ°è®¤è¯é¡µçš„URLåå¹¶æ‰“å¼€ï¼Œå°±èƒ½çœ‹åˆ°ä¹‹å‰çš„è®¤è¯é¡µäº†ï¼ˆå•çº¯æ‰“å¼€é¦–é¡µä¼šæ˜¾ç¤ºIt works! ï¼Œä¸åŠ ä»»ä½•å‚æ•°æ‰“å¼€çš„è¯åˆ™æ˜¯è·³è½¬è‡³æ–°æµªé¦–é¡µï¼Œè¿™æ˜¯å“ªä½é¬¼æ‰å†™çš„é¡µé¢ğŸŒšï¼‰</p>
<p>è®¤è¯é¡µæ‰“å¼€ä¹‹åä»æ˜¯ä¸€ä¸ªå¤§å¤§çš„å®¢æˆ·ç«¯ä¸‹è½½æŒ‰é’®ï¼Œä½†ä¸è¦æ…Œã€‚æ‰“å¼€å®¡æŸ¥å…ƒç´ å°±ä¼šå‘ç°ï¼Œæ‰€æœ‰çš„ç™»å½•æ¡†ã€é‡è®¾å¯†ç æ¡†ã€æ³¨å†Œæ¡†ç­‰éƒ½åœ¨ï¼Œåªæ˜¯è¢«éšè—æ‰äº†</p>
<p>å»æ‰éšè—æ ·å¼ï¼Œæ­£å¸¸è¾“å…¥è´¦å·å¯†ç ç™»å½•å³å¯ï¼Œå’Œä¹‹å‰çš„æ“ä½œä¸€æ¨¡ä¸€æ ·ï¼ˆç™»å½•åä¼šè·³è½¬è‡³ç™¾åº¦é¦–é¡µï¼Œçœ‹æ¥è¿™ä¸¤ä¸ªé¡µé¢æ˜¯åŒä¸€ä½é¬¼æ‰å†™çš„ğŸŒï¼‰</p>
<h2>ç™»å½•æ¥å£åŠå‚æ•°åˆ†æ</h2><p>æ‰¾åˆ°äº†ç™»å½•æ¡†ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹åˆ†ææ¥å£å’Œå‚æ•°äº†</p>
<p>ç›´æ¥çœ‹é¡µé¢ä»£ç å§ï¼Œå†™çš„æŒºä¹±çš„ï¼Œå¥½åœ¨æœªç»è¿‡æ··æ·†ï¼Œå…³é”®éƒ¨åˆ†ï¼š</p>
<h3>ç™»å½•æ¥å£</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">var</span> loginAction  <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> btn <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#first_button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> round <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#frmLogin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">"/cmps/admin.php/api/loginaction?round="</span><span class="token operator">+</span>round<span class="token punctuation">,</span>
        data<span class="token punctuation">:</span> form<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        dataType<span class="token punctuation">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>
        success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>reasoncode <span class="token operator">==</span> <span class="token string">"44"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    params <span class="token operator">=</span> <span class="token function">getWechatParams</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//showSelectMessage(params);</span>
                    <span class="token function">wechatAuth</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>okParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> data<span class="token punctuation">.</span>info<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                btn<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">doFailedLogin</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token string">"frmLogin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¯ä»¥çœ‹åˆ°æ¥å£ä¸º<code>/cmps/admin.php/api/loginaction</code>ï¼Œå‚æ•°éƒ½åœ¨ç™»å½•è¡¨å•é‡Œï¼š</p>
<p><em>å…³é”®éƒ¨åˆ†å·²æ‰‹åŠ¨æ‰“ç </em></p>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>access_type</td>
<td>2</td>
<td>ä½œç”¨æœªçŸ¥</td>
</tr>
<tr>
<td>acsign</td>
<td>***</td>
<td>ç™»å½•çŠ¶æ€æ¥å£ä¸­çš„signå­—æ®µ</td>
</tr>
<tr>
<td>btype</td>
<td>pc</td>
<td>çŒœæµ‹ä¸ºå¹³å°ç±»å‹</td>
</tr>
<tr>
<td>client_mac</td>
<td>***</td>
<td>å®¢æˆ·ç«¯MAC</td>
</tr>
<tr>
<td>contact_phone</td>
<td>400-038-5858</td>
<td>æœåŠ¡ç”µè¯</td>
</tr>
<tr>
<td>devicemode</td>
<td></td>
<td>é»˜è®¤ç©ºå€¼ï¼Œä½œç”¨æœªçŸ¥</td>
</tr>
<tr>
<td>gw_address</td>
<td>172.17.1.1</td>
<td>ç½‘å…³åœ°å€</td>
</tr>
<tr>
<td>gw_id</td>
<td>***</td>
<td>APçš„SSID</td>
</tr>
<tr>
<td>gw_port</td>
<td>8060</td>
<td>ç½‘å…³ç«¯å£</td>
</tr>
<tr>
<td>lastaccessurl</td>
<td></td>
<td>é»˜è®¤ç©ºå€¼ï¼Œä½œç”¨æœªçŸ¥</td>
</tr>
<tr>
<td>logout_reason</td>
<td>0</td>
<td>ä½œç”¨æœªçŸ¥</td>
</tr>
<tr>
<td>mac</td>
<td>***</td>
<td>åŒclient_mac</td>
</tr>
<tr>
<td>name</td>
<td>***</td>
<td>è´¦å·</td>
</tr>
<tr>
<td>online_time</td>
<td>0</td>
<td>çŒœæµ‹ä¸ºåœ¨çº¿æ—¶é—´ï¼Œä½œç”¨æœªçŸ¥</td>
</tr>
<tr>
<td>page_time</td>
<td>1535509645</td>
<td>ç™»å½•é¡µæ—¶é—´æˆ³</td>
</tr>
<tr>
<td>password</td>
<td>***</td>
<td>å¯†ç </td>
</tr>
<tr>
<td>sign</td>
<td>***</td>
<td>ç­¾åï¼Œå¯ä»ç™»å½•è¡¨å•ä¸­è·å–</td>
</tr>
<tr>
<td>station_cloud</td>
<td>login.gwifi.com.cn</td>
<td>ä½œç”¨æœªçŸ¥</td>
</tr>
<tr>
<td>station_sn</td>
<td>***</td>
<td>çŒœæµ‹ä¸ºåŸºç«™ID</td>
</tr>
<tr>
<td>suggest_phone</td>
<td>400-038-5858</td>
<td>åŒcontact_phone</td>
</tr>
<tr>
<td>url</td>
<td><a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a></td>
<td>ç™»å½•æˆåŠŸåè·³è½¬çš„ç½‘ç«™</td>
</tr>
<tr>
<td>user_agent</td>
<td></td>
<td>é»˜è®¤ç©ºå€¼ï¼Œä½œç”¨æœªçŸ¥</td>
</tr>
</tbody></table>
<p>è§‚å¯Ÿåå‘ç°ç™»å½•æ‰€éœ€çš„å¤§éƒ¨åˆ†å‚æ•°åœ¨è®¤è¯é¡µçš„URLå‚æ•°é‡Œå·²ç»æœ‰äº†ï¼Œå‰©ä¸‹çš„æœ‰ä¸€éƒ¨åˆ†å·²ç»åœ¨ç™»å½•è¡¨å•é‡Œå¡«å¥½äº†ï¼Œå¦ä¸€éƒ¨åˆ†éœ€è¦ä»ä¸‹æ–‡çš„ç™»å½•çŠ¶æ€æ¥å£ä¸­å–åˆ°ï¼Œå°†å…¶ç»„åˆèµ·æ¥åå‘é€POSTè¯·æ±‚</p>
<p>ç™»å½•æˆåŠŸåè¿”å›JSONæ•°æ®ï¼š</p>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"status"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"info"</span><span class="token operator">:</span><span class="token string">"http://172.17.1.1:8060/wifidog/auth?token=***&amp;info=***"</span><span class="token punctuation">,</span>
    <span class="token property">"data"</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">"auth_verify"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"reasoncode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"remain_time"</span><span class="token operator">:</span><span class="token number">1053640</span><span class="token punctuation">,</span>
        <span class="token property">"limit_time"</span><span class="token operator">:</span><span class="token null">null</span><span class="token punctuation">,</span>
        <span class="token property">"cost_type"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">"serviceplan_id"</span><span class="token operator">:</span><span class="token string">"1357"</span><span class="token punctuation">,</span>
        <span class="token property">"is_share"</span><span class="token operator">:</span><span class="token string">"2"</span><span class="token punctuation">,</span>
        <span class="token property">"wechat_enable"</span><span class="token operator">:</span><span class="token string">"1"</span><span class="token punctuation">,</span>
        <span class="token property">"bw_up"</span><span class="token operator">:</span><span class="token string">"2048"</span><span class="token punctuation">,</span>
        <span class="token property">"bw_down"</span><span class="token operator">:</span><span class="token string">"10240"</span><span class="token punctuation">,</span>
        <span class="token property">"ontrial"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"need_complete_data"</span><span class="token operator">:</span><span class="token null">null</span><span class="token punctuation">,</span>
        <span class="token property">"complete_data_url"</span><span class="token operator">:</span><span class="token null">null</span><span class="token punctuation">,</span>
        <span class="token property">"permit_intranet"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">"permit_internet"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">"carrier_operator"</span><span class="token operator">:</span><span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token property">"network_type"</span><span class="token operator">:</span><span class="token string">"2"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶ä¸­çš„<code>info</code>å­—æ®µçš„URLç”¨ä½œç™»å½•éªŒè¯ï¼Œä½¿ç”¨GETè¯·æ±‚å°±å¯ä»¥å®Œæˆæ•´ä¸ªè®¤è¯ç™»å½•çš„æµç¨‹äº†</p>
<p>ç™»å½•å¤±è´¥çš„è¯<code>info</code>å­—æ®µåˆ™ä¼šè¿”å›ç™¾åº¦é¦–é¡µçš„URLï¼Œå†æ¬¡åæ§½ä¸€ä¸‹ğŸŒ</p>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"status"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"info"</span><span class="token operator">:</span><span class="token string">"http:\/\/www.baidu.com"</span><span class="token punctuation">,</span>
    <span class="token property">"data"</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3>ç™»å½•çŠ¶æ€æ¥å£</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//è·å–ç»ˆç«¯ä¿¡æ¯</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">"http://172.17.1.1:8060/wifidog/get_auth_state?ip=***&amp;mac=***&amp;sign=***&amp;callback=***"</span><span class="token punctuation">,</span>
        dataType<span class="token punctuation">:</span><span class="token string">'jsonp'</span><span class="token punctuation">,</span>
        success<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            c <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'('</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>resultCode <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">fixData</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                window<span class="token punctuation">.</span>top<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"http://www.baidu.com"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åŒæ ·å¯ä»¥çœ‹åˆ°æ¥å£ä¸º<code>/wifidog/get_auth_state</code>ï¼Œå‚æ•°ä¸ºIPã€MACã€ç­¾åå’Œå›è°ƒå‡½æ•°åï¼Œå…¶ä¸­çš„ç­¾åå¯ä»¥ç›´æ¥åœ¨é¡µé¢è¡¨å•é‡Œå–åˆ°</p>
<p>è¿”å›ç»“æœä¸ºJSONPæ•°æ®ï¼Œæå–ä¸ºï¼š</p>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"resultCode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"data"</span><span class="token operator">:</span>"<span class="token punctuation">{</span><span class="token property">"auth_state"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">"gw_id"</span><span class="token operator">:</span><span class="token string">"***"</span><span class="token punctuation">,</span><span class="token property">"access_type"</span><span class="token operator">:</span><span class="token string">"2"</span><span class="token punctuation">,</span><span class="token property">"authStaType"</span><span class="token operator">:</span><span class="token string">"0"</span><span class="token punctuation">,</span><span class="token property">"station_sn"</span><span class="token operator">:</span><span class="token string">"***"</span><span class="token punctuation">,</span><span class="token property">"client_mac"</span><span class="token operator">:</span><span class="token string">"***"</span><span class="token punctuation">,</span><span class="token property">"online_time"</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token property">"logout_reason"</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token property">"contact_phone"</span><span class="token operator">:</span><span class="token string">"400-038-5858"</span><span class="token punctuation">,</span><span class="token property">"suggest_phone"</span><span class="token operator">:</span><span class="token string">"400-038-5858"</span><span class="token punctuation">,</span><span class="token property">"station_cloud"</span><span class="token operator">:</span><span class="token string">"login.gwifi.com.cn"</span><span class="token punctuation">,</span><span class="token property">"orgId"</span><span class="token operator">:</span><span class="token string">"899"</span><span class="token punctuation">,</span><span class="token property">"sign"</span><span class="token operator">:</span><span class="token string">"***"</span><span class="token punctuation">}</span>"
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶ä¸­çš„<code>auth_state</code>å­—æ®µå€¼ä¸º<code>2</code>æ—¶ä¸ºæ­£å¸¸ç™»å½•çŠ¶æ€</p>
<p>è§‚å¯Ÿç™»å½•æˆåŠŸåæ‰§è¡Œçš„æ“ä½œï¼Œæ˜¯æ›¿æ¢äº†éƒ¨åˆ†è¡¨å•æ•°æ®ï¼š</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fixData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".gw_id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>gw_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".access_type"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>access_type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".station_sn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>station_sn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".client_mac"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>client_mac<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".online_time"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>online_time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".logout_reason"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>logout_reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".contact_phone"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>contact_phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".suggest_phone"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>suggest_phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".station_cloud"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>station_cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".acsign"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>sign<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è¿›è¡Œæ¨¡æ‹Ÿç™»å½•æ—¶ä¹Ÿåº”ä¸€ä¸€æ›¿æ¢</p>
<p><em>éœ€è¦æ³¨æ„çš„æ˜¯å‚æ•°<code>callback</code>æ˜¯å¿…éœ€çš„ï¼Œä¸ç„¶å°†ä¸ä¼šè¿”å›<code>sign</code>å­—æ®µå€¼</em></p>
<h3>ç™»å‡ºæ¥å£</h3><p>ç™»å‡ºåŠŸèƒ½åœ¨å®¢æˆ·ç«¯å¼•å¯¼ä¸‹è½½é¡µä¸Šï¼Œæ¥å£åŠå‚æ•°ä¸º<code>http://172.17.1.1/getApp.htm?action=logout</code></p>
<p>è¿”å›æ•°æ®ä¸ºï¼š</p>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"resultCode"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"data"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶ä¸­<code>resultCode</code>å­—æ®µå€¼ä¸º<code>0</code>æ—¶ç™»å‡ºæˆåŠŸ</p>
<h2>æ¨¡æ‹Ÿç™»å½•è„šæœ¬</h2><p>ç°åœ¨ç™»å½•ç›¸å…³æ¥å£å’Œæ‰€éœ€å‚æ•°å·²ç»äº†è§£ï¼Œå¯ä»¥å¼€å§‹å†™æ¨¡æ‹Ÿç™»å½•äº†</p>
<p>è¿™é‡Œä½¿ç”¨Pythonæ¥å®ç°ï¼Œç†è®ºä¸Šå¯¹æ‰€æœ‰GiWiFiç³»ç»Ÿé€šç”¨</p>
<script src="https://gist.github.com/journey-ad/73d900a675b090b9f2c94a1945e6ec19.js"></script>


<h2>å‚è€ƒ</h2><p><a href="https://www.bzqll.com/default/20171122-%E6%A0%A1%E5%9B%AD%E7%BD%91GiWiFi%E6%A8%A1%E6%8B%9F%E7%99%BB%E9%99%86.htm" target="_blank" rel="noopener">æ ¡å›­ç½‘GiWiFiæ¨¡æ‹Ÿç™»é™†</a></p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    

    <script>
        var pub_date = 1535482200000;
    </script>
</div>
    <div class="footer"
     id="footer">
    <p>
        Copyright Â© 2020 <a class="flink"
           href="https://nocilol.me">æ¶é­”èè‰æ§</a> Â· Theme by <a class="flink"
           href="https://github.com/journey-ad/hexo-theme-geek">Geek</a>.
        <br>
        Made with <i class="fa fa-heart throb"
           style="color:#d43f57"></i> by <span class="author"
              itemprop="copyrightHolder">journey.ad</span>.
        <label class="el-switch el-switch-green el-switch-sm"
               style="vertical-align: sub;">
            <input type="checkbox"
                   name="switch"
                   id="update_style">
            <span class="el-switch-style"></span>
        </label>
    </p>
</div>

<a href="javascript:void(0);" class="back-to-top" target="_self"></a>

<input type="hidden"
       id="web_style"
       value="white">
<input type="hidden"
       id="valine_appid"
       value="CaQKuPQDfnfPFUkTw6MMt8ME-gzGzoHsz">
<input type="hidden"
       id="valine_appKey"
       value="uWuwGS1xiIwh3zHKENc7ubyL">
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>

  
<script src="/libs/jquery.min.js"></script>

  
<script src="/libs/highlight/highlight.pack.js"></script>

  
<script src="/js/js.js"></script>


<style type="text/css">
    .v * {
        /* color: #698fca; */
    }

    .v .vlist .vcard .vhead .vsys {
        color: #3a3e4a;
    }

    .v .vlist .vcard .vh .vmeta .vat {
        color: #638fd5;
    }

    .v .vlist .vcard .vhead .vnick {
        color: #6ba1ff;
    }

    .v a {
        color: #8696b1;
    }

    .v .vlist .vcard .vhead .vnick:hover {
        color: #669bfc;
    }

    .v .vcards .vcard .vhead .vnick {
        padding-left: 1px;
    }

    .v .vcontent .vemoji {
        max-width: 30px;
    }

    .v[data-class=v] p {
        color: inherit;
    }

</style>

<!-- Load TweenLite -->
<script src="https://cdn.jsdelivr.net/npm/greensock@1.20.2/dist/TweenLite.js"></script>

<!-- Copyrighted cubism SDK -->
<script src="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
<!-- Load Pixi (dependency for cubism 2/4 integrated loader) -->
<script src="https://cdn.jsdelivr.net/npm/pixi.js@5.3.6/dist/pixi.min.js"></script>
<!-- Load cubism 4 integrated loader -->
<script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display@0.3.1/dist/cubism4.min.js"></script>

<!-- Load pio and alternative loader -->
<link href="https://cdn.jsdelivr.net/gh/journey-ad/blog-img@94eb7e2/live2d/lib/pio.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/gh/journey-ad/blog-img@94eb7e2/live2d/lib/pio.js"></script>
<script src="https://cdn.jsdelivr.net/gh/journey-ad/blog-img@94eb7e2/live2d/lib/pio_sdk4.js"></script>
<script src="https://cdn.jsdelivr.net/gh/journey-ad/blog-img@94eb7e2/live2d/lib/load.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71903189-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-71903189-1');
</script>

</body>

</html>