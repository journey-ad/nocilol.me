<!DOCTYPE html>
<html lang="zh">
<!--
             -. .                                        
       _____   ',' ,                                    
     ,'     ,'   ', ',                                  
   ,'     ,'      |  |                                  
   \       \       |  |                                  
     \ /^\   \    ,' ,'                                  
           \   \ ,' ,'      L'Internationale,            
     / ~-.___\.-'  ,'            Sera le genre humain.   
   /   .______.- ~ \                                     
 /   /'          \   \                                   
 \./               \/'                                   
                                                         
-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="/favicon.png" type="image/png">
    <title>ç ´è§£SketchfabåŠ å¯†å¹¶æå–æ¨¡å‹æ•°æ® - æ¶é­”èè‰æ§</title>
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/css/style.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/libs/highlight/styles/monokai-sublime.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/libs/font-awesome/css/font-awesome.min.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/libs/zpix/zpix.css">
      <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/js/theme.js"></script>
    
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="æ¶é­”èè‰æ§" type="application/atom+xml">
</head>

<body id="bodyx" path="archives/lab/ripping-sketchfab-models/">
    <div class="hd posts">
    <a class="back" href="javascript:void(0);" target="_self"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <h1 class="post-title">ç ´è§£SketchfabåŠ å¯†å¹¶æå–æ¨¡å‹æ•°æ®</h1>
    <hr>

    
        <div class="outdated-notify">
            æœ¬æ–‡å‘å¸ƒäº <span class="num">-</span> å¤©å‰ï¼Œæ–‡ä¸­æ‰€æè¿°çš„ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜æˆ–æ˜¯è¿‡æ—¶ï¼Œè¯·æ³¨æ„è¾¨åˆ«
        </div>
    

    <div class="post-content">
        <p><img src="https://img.imjad.cn/images/2018/11/20/record.gif" alt="é­”æ³•å°‘å¥³æ™ºä¹ƒ"></p>

    <div class="cplayer-template"
      id="cplayer-87815863"
      data-id="cplayer-87815863"
      data-playlist=%5B%7B%22name%22%3A%22loading...%22%2C%22artist%22%3A%22loading...%22%7D%5D
      data-ids=[33955999]
      data-autoplay="false"
      style="position: relative"
    ></div>
    <script>
      (function(){

        let getLyric = id => {
          return new Promise((resolve, reject) => {
            fetch("https://api.imjad.cn/cloudmusic/?type=lyric&id=" + id).then(res => {
              return res.json()
            }).then(data => {
              // console.log(data)
              if(!data.lrc){
                data = Object.assign(data, {
                  lrc: {lyric: '[00:00.00]æ‰¾ä¸åˆ°æ­Œè¯çš„è¯´â€¦(âŠ™ï¹âŠ™)[99:00.00]'},
                  tlyric: {lyric: '[00:00.00]ç¿»è¯‘ä¸å­˜åœ¨çš„è¯´â€¦â•®(â•¯â–½â•°)â•­[99:00.00]'}
                })
              }
              let obj = {
                lyric: data.lrc.lyric,
                tlyric: data.tlyric.lyric
              }
              resolve(obj);
            })
          })
        }

        function loadcplayer() {
          if (typeof window.cplayerList === 'undefined') window.cplayerList = {};
          if (typeof window.cplayerList["cplayer-87815863"] !== 'undefined') return;
          if (!cplayer.prototype.add163) cplayer.prototype.add163 = async function add163(id) {
            if (!id) throw new Error("Unable Property.");
            let lyric = await getLyric(id);
            // console.log(lyric)

            return fetch("https://api.imjad.cn/cloudmusic/?type=detail&id=" + id).then(function(res){return res.json()}).then(function(data){
              let obj = {
                name: data.songs[0].name,
                artist: data.songs[0].ar.map(function(ar){ return ar.name }).join(','),
                poster: data.songs[0].al.picUrl,
                lyric: lyric.lyric,
                sublyric: lyric.tlyric,
                src: 'https://api.imjad.cn/cloudmusic/?type=song&raw=true&id=' + id
              }
              this.add(obj);
              return obj;
            }.bind(this))
          }

          window.cplayerList["cplayer-87815863"] = new cplayer({
            element: document.getElementById("cplayer-87815863"),
            playlist: [{"name":"loading...","artist":"loading..."}],
            generateBeforeElement: false,
            deleteElementAfterGenerate: false,
            autoplay: false,
            zoomOutKana: true,
            style: `c-player {
                      font-size: 16px !important;
                      position: relative;
                      left: 50%;
                      transform: translateX(-50%);
                      width: auto;
                      max-width: 550px;
                      margin: 30px auto;
                    }
                    c-player .cp-controls{
                      user-select: none;
                    }
                    c-player .cp-lyric{
                      width: 100%;
                      margin: 0.41667em 0;
                    }
                    c-player .cp-play-button .cp-play-icon.cp-play-icon-paused {
                      margin-left: 0.8em;
                    }
                    c-player .cp-drop-down-menu {
                      line-height: 1.85;
                    }
                    @media (max-width: 768px) {
                      c-player{
                        font-size: 12px !important;
                        left: auto;
                        transform: none;
                        width: 100%;
                        margin: 10px auto;
                      }
                      c-player .cp-mainbody{
                        min-height: 5.16667em;
                      }
                      c-player .cp-poster{
                        width: 5.16667em;
                        height: 5.16667em;
                      }
                      c-player .cp-center-container{
                        height: 5.16667em;
                      }
                      c-player .cp-play-button, c-player .cp-volume-button, c-player .cp-prev-button, c-player .cp-list-button, c-player .cp-mode-button, c-player .cp-next-button{
                        width: 1.54167em;
                        height: 1.54167em;
                      }
                      c-player .cp-icon, c-player .cp-prev-icon, c-player .cp-next-icon, c-player .cp-volume-icon, c-player .cp-random-icon, c-player .cp-single-icon, c-player .cp-loop-icon, c-player .cp-list-icon{
                        height: 1.54167em;
                        width: 1.54167em;
                      }
                      c-player .cp-play-button{
                        height: 2.8em;
                        width: 2.8em;
                      }
                      c-player .cp-play-button .cp-play-icon{
                        margin: 0.8em;
                      }
                      c-player .cp-play-button .cp-play-icon.cp-play-icon-paused {
                        margin: 0.7875em;
                        margin-left: 1em;
                      }
                      c-player .cp-volume-icon {
                        width: 1.76667em;
                      }
                      c-player .cp-list-button {
                        width: 1.54167em;
                        height: 1.54167em;
                      }
                      c-player .cp-mode-button {
                        width: 1.54167em;
                        height: 1.54167em;
                      }
                    }
                    `
          });

          window.cplayerList["cplayer-87815863"].add163(33955999)

          let player = window.cplayerList["cplayer-87815863"]
          player.to(1)
          player.remove(player.playlist[0])
        }
        
        if (typeof window.cplayer === 'undefined' && !document.getElementById("cplayer-script")) {
          var js = document.createElement("script");
          js.src = 'https://cdn.jsdelivr.net/gh/MoePlayer/cPlayer/dist/cplayer.js';
          js.id = "cplayer-script";
          js.addEventListener("load", loadcplayer);
          document.body.appendChild(js);
        } else {
          window.addEventListener("load", loadcplayer);
        }
      })()
    </script>

<h2>å‰è¨€</h2><blockquote>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒæŠ˜è…¾ä»…é™ç”¨äºå­¦ä¹ ç”¨é€”ï¼Œå¯é€šè¿‡æ­£è§„é€”å¾„è´­ä¹°çš„æ¨¡å‹è¯·å‹¿éæ³•æå–ï¼Œè¯·å‹¿å¯¹æ¨¡å‹åŠè´´å›¾ç­‰æ•°æ®è¿›è¡Œä¿®æ”¹ã€äºŒæ¬¡åˆ†å‘ã€å•†ç”¨ç­‰è¿åSketchfabç‰ˆæƒè§„å®šåŠè‘—ä½œæƒç›¸å…³æ³•å¾‹æ³•è§„çš„è¡Œä¸ºã€‚ä½¿ç”¨æœ¬æ–‡æåˆ°çš„æ–¹æ³•æå–æ¨¡å‹äº§ç”Ÿçš„ä¸€åˆ‡åæœç”±æ“ä½œäººæ‰¿æ‹…ï¼Œä¸æœ¬ç½‘ç«™åŠæœ¬äººæ— å…³</p>
</blockquote>
<p>æœ€è¿‘åœ¨Sketchfabçœ‹åˆ°äº†ä¸€ä¸ª<a href="https://sketchfab.com/models/9120703a4aee4c2cb0313a9ca3e1e1a3" target="_blank" rel="noopener">æ™ºä¹ƒçš„æ¨¡å‹</a>ï¼Œé¡¿æ—¶æ„Ÿè§‰æƒ³è¦æ‹¥æœ‰ï¼Œä½†æ¨¡å‹ä½œè€…å¹¶æ²¡æœ‰å¼€æ”¾ä¸‹è½½å’Œè´­ä¹°ï¼Œè¿«äºå®åœ¨æ˜¯å¿ƒç—’éš¾è€ï¼Œä¾¿åœ¨ç½‘ä¸Šå¯»æ‰¾ç ´è§£SketchfabåŠ å¯†çš„æ–¹æ³•</p>
<p>é¦–å…ˆåœ¨æŸå®ä¸Šæœç´¢ï¼Œå‘ç°æœ‰å‡ å®¶åº—é“ºæä¾›äº†æ”¶è´¹ä¸‹è½½æœåŠ¡ï¼Œè™½ç„¶æ²¡æœ‰æ˜è¯´ï¼Œä½†çœ‹æè¿°ä¿¡æ¯å¯ä»¥å®ç°â€œä»»æ„ä¸‹è½½â€ï¼Œå¿ƒä¸­åº•æ°”åˆè¶³äº†ä¸¤åˆ†<del>æŸå®ä¸‹è½½æœåŠ¡å‡ä»·20 RMBï¼Œå¸Œæœ›ä¸è¦å› ä¸ºç ¸äº†åˆ«äººé¥­ç¢—è€Œè¢«è¿½æ€ğŸŒ</del></p>
<p>ç½‘ç»œä¸Šçš„èµ„æ–™ä¸å¤šï¼Œé›¶æ˜Ÿå‡ ä¸ªæåˆ°çš„ä¿¡æ¯æŒ‡å‘äº†Ninja Ripperã€‚è¿™ä¸€å·¥å…·åŸç†æ˜¯åŠ«æŒç³»ç»ŸDirectXæ¥å£ï¼Œç›´æ¥ä»å†…å­˜ä¸­æ‹¿åˆ°æ¸²æŸ“æ•°æ®ï¼Œç†è®ºä¸Šå¯ä»¥æ”¯æŒä»»æ„D3Dåº”ç”¨ï¼Œå¹¶ä¸”æ— è§†ä»»ä½•åŠ å¯†ï¼Œæ¯•ç«Ÿä¸ç®¡æ€ä¹ˆåŠ å¯†ï¼Œæœ€åç³»ç»Ÿå–‚ç»™æ˜¾å¡çš„éƒ½æ˜¯æ ‡å‡†çš„æ•°æ®ã€‚å¯æƒœçš„æ˜¯Sketchfabåœ¨å‡ ä¸ªæœˆå‰å·²ç»å‡çº§äº†ç³»ç»Ÿï¼Œæå–å‡ºæ¥çš„éƒ½æ˜¯ä¸€äº›æ®‹ç‰‡ï¼Œæ²¡æœ‰ä½¿ç”¨ä»·å€¼</p>
<p>æŠ±ç€ä¸æ­»å¿ƒçš„æƒ³æ³•ç»§ç»­æœç´¢ï¼Œç»ˆäºåœ¨ä¸€ä¸ªæ¯›å­è®ºå›ä¸Šæ‰¾åˆ°äº†å¸Œæœ›ï¼šä¸€ä¸ªè§£å¯†è„šæœ¬ã€‚è¿™ä¸ªå·¥å…·çš„åŸç†å°±å¾ˆç›´æ¥äº†ï¼Œå› ä¸ºSketchfabä½¿ç”¨äº†WebGLæ¥æ˜¾ç¤ºæ¨¡å‹ï¼Œé‚£ä¹ˆç†è®ºä¸Šå°±ä¸€å®šèƒ½å¤Ÿç ´è§£ï¼Œæ¯•ç«ŸåŠ è§£å¯†ç®—æ³•éƒ½åœ¨å‰ç«¯ã€‚è¿™ä¸ªè„šæœ¬çš„ä½œè€…é€†å‘äº†å‡ºè§£å¯†ç®—æ³•ï¼Œå¹¶ç”¨Pythonå®ç°å‡ºè§£å¯†å·¥å…·ï¼Œåšæˆäº†Blenderçš„æ’ä»¶ï¼Œè™½ç„¶éƒ½æ˜¯å¾ˆå¤è€çš„ç‰ˆæœ¬ï¼Œä½†è¦ä»€ä¹ˆè‡ªè¡Œè½¦ï¼Œèƒ½ç”¨å°±è¡Œ</p>
<p>é‚£ä¹ˆå°±åˆ©ç”¨ç©ºä½™æ—¶é—´ï¼Œç®€å•è®°ä¸‹æŠ˜è…¾è¿‡ç¨‹</p>
<h2>æå–</h2><h3>æ‰€éœ€å·¥å…·</h3><ul>
<li>Python 2.6.6</li>
<li>Blender 2.49</li>
<li><strong><a href="https://cdn.imjad.cn/usr/uploads/Blender249[osgjs].zip" target="_blank" rel="noopener">Blender249[osgjs].zip</a></strong> è§£å¯†è„šæœ¬</li>
</ul>
<h3>å·¥å…·å‡†å¤‡</h3><ol>
<li>å®‰è£…Pythonç¯å¢ƒ (ä»¥ä¸‹æ–¹æ³•äºŒé€‰ä¸€ï¼Œæ¨èaæ–¹æ³•ï¼Œå¯ç§»åŠ¨ä½¿ç”¨ä¸”ä¸å½±å“å…¶ä»–Pythonç‰ˆæœ¬)<ul>
<li>a.ä¸‹è½½Python 2.6.6æºç åŒ…ï¼Œå°†å…¶ä¸­çš„<strong>Lib</strong>ç›®å½•ä¸­çš„å†…å®¹å‹ç¼©ä¸º<strong>python26.zip</strong>å¹¶æ”¾ç½®äºBlenderå®‰è£…ç›®å½•</li>
<li>b.æ‰§è¡Œå®‰è£…ç¨‹åºå¹¶æ·»åŠ ç¯å¢ƒå˜é‡<code>PythonPath</code>ï¼Œå€¼ä¸º<code>C:\Python26;C:\Python26\DLLs;C:\Python26\Lib;C:\Python26\Lib\lib-tk</code>ï¼ˆå‡è®¾å®‰è£…ç›®å½•ä¸º<code>C:\Python26</code>ï¼‰</li>
</ul>
</li>
<li>å®‰è£…Blender 2.49</li>
<li>å°†<strong>Blender249[osgjs].zip</strong>ä¸­çš„<strong>newGameLib</strong>ç›®å½•è§£å‹è‡³Blenderå®‰è£…ç›®å½•ä¸­çš„<code>.blender\scripts</code>ç›®å½•ä¸‹</li>
<li><strong>Blender249.blend</strong>å•ç‹¬æ”¾ç½®</li>
</ol>
<h3>ä¸‹è½½æ¨¡å‹æ•°æ®</h3><ol>
<li>æ‰“å¼€æµè§ˆå™¨å¹¶æ‰“å¼€Dev Tools</li>
<li>æ‰“å¼€æ‰€éœ€æ¨¡å‹çš„Sketchfabé¡µé¢ï¼Œç¡®ä¿æ¨¡å‹å·²ç»å®Œå…¨åŠ è½½</li>
<li>åœ¨Networké€‰é¡¹å¡ä¸­æ‰¾åˆ°å¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶å¹¶ä¸‹è½½ä¸‹æ¥æ”¾åˆ°ä¸€èµ·<ul>
<li><strong>file.osgjs.gz</strong></li>
<li><strong>model_file.bin.gz</strong></li>
</ul>
</li>
<li>å…¶ä¸­<strong>file.osgjs.gz</strong>æ˜¯ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œå°†å…¶é‡å‘½åä¸º<strong>file.osgjs</strong></li>
<li>è´´å›¾èµ„æºåœ¨<code>media.sketchfab.com</code>ä¸‹ï¼Œæœ‰ä¸åŒåˆ†è¾¨ç‡ä¹‹åˆ†ï¼Œæ³¨æ„é‰´åˆ«</li>
<li>ä¹Ÿå¯ä»¥å¿½ç•¥ä»¥ä¸Šæ­¥éª¤ï¼Œç›´æ¥ä»ç½‘é¡µåŒ…å«çš„æ•°æ®ä¸­æå–ï¼Œå…·ä½“å¯å‚è€ƒä¸‹åˆ—ä»£ç ï¼š</li>
</ol>
<h4>æ¨¡å‹æ•°æ®ä¸‹è½½è„šæœ¬</h4><p>ä¸ºäº†å¿«é€Ÿä¸‹è½½æ¨¡å‹æ•°æ®ï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„ä¸‹è½½è„šæœ¬ï¼š</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> re
<span class="token keyword">import</span> json
<span class="token keyword">import</span> requests
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse
<span class="token keyword">from</span> html <span class="token keyword">import</span> unescape
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

SCRIPT_VERSION <span class="token operator">=</span> <span class="token string">'1.0'</span>

HEADERS <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.25 Safari/537.36'</span><span class="token punctuation">,</span>
    <span class="token string">'accept-encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip, deflate, br'</span><span class="token punctuation">,</span>
    <span class="token string">'accept-language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh-TW;q=0.8,zh;q=0.6,en;q=0.4,ja;q=0.2'</span><span class="token punctuation">,</span>
    <span class="token string">'cache-control'</span><span class="token punctuation">:</span> <span class="token string">'max-age=0'</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">'input url:'</span><span class="token punctuation">)</span>
    parse<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Parsing...'</span><span class="token punctuation">)</span>
        page <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>HEADERS<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>

        modelId <span class="token operator">=</span> urlparse<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        data <span class="token operator">=</span> unescape<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'js-dom-data-prefetched-data'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span>
        data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        name <span class="token operator">=</span> validateTitle<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'/i/models/'</span><span class="token operator">+</span>modelId<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        thumbnailData <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'/i/models/'</span><span class="token operator">+</span>modelId<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'thumbnails'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'images'</span><span class="token punctuation">]</span>
        thumbnail <span class="token operator">=</span> getBiggestImage<span class="token punctuation">(</span>thumbnailData<span class="token punctuation">)</span>
        osgjsUrl <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'/i/models/'</span><span class="token operator">+</span>modelId<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'files'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'osgjsUrl'</span><span class="token punctuation">]</span>
        modelFile <span class="token operator">=</span> osgjsUrl<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'file.osgjs.gz'</span><span class="token punctuation">,</span> <span class="token string">'model_file.bin.gz'</span><span class="token punctuation">)</span>
        texturesData <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'/i/models/'</span><span class="token operator">+</span>modelId<span class="token operator">+</span><span class="token string">'/textures?optimized=1'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'results'</span><span class="token punctuation">]</span>
        textures <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Model Id:'</span><span class="token punctuation">,</span> modelId<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Name:'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Thumbnail URL:'</span><span class="token punctuation">,</span>thumbnail<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'osgjs URL:'</span><span class="token punctuation">,</span> osgjsUrl<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Model File:'</span><span class="token punctuation">,</span> modelFile<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Textures:'</span><span class="token punctuation">,</span> len<span class="token punctuation">(</span>texturesData<span class="token punctuation">)</span><span class="token punctuation">)</span>

        download<span class="token punctuation">(</span>thumbnail<span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'thumbnail.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        download<span class="token punctuation">(</span>osgjsUrl<span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'file.osgjs'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        download<span class="token punctuation">(</span>modelFile<span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'model_file.bin.gz'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> texture <span class="token keyword">in</span> texturesData<span class="token punctuation">:</span>
            textureUrl <span class="token operator">=</span> getBiggestImage<span class="token punctuation">(</span>texture<span class="token punctuation">[</span><span class="token string">'images'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            download<span class="token punctuation">(</span>textureUrl<span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'texture'</span><span class="token punctuation">,</span> validateTitle<span class="token punctuation">(</span>texture<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">except</span> AttributeError<span class="token punctuation">:</span>
        <span class="token keyword">raise</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

<span class="token keyword">def</span> <span class="token function">getBiggestImage</span><span class="token punctuation">(</span>images<span class="token punctuation">)</span><span class="token punctuation">:</span>
    size <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> img <span class="token keyword">in</span> images<span class="token punctuation">:</span>
        <span class="token keyword">if</span> img<span class="token punctuation">[</span><span class="token string">'size'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> None <span class="token operator">and</span> img<span class="token punctuation">[</span><span class="token string">'size'</span><span class="token punctuation">]</span> <span class="token operator">></span> size<span class="token punctuation">:</span>
            size <span class="token operator">=</span> img<span class="token punctuation">[</span><span class="token string">'size'</span><span class="token punctuation">]</span>
            imgUrl <span class="token operator">=</span> img<span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> imgUrl

<span class="token keyword">def</span> <span class="token function">validateTitle</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">:</span>
    pattern <span class="token operator">=</span> r<span class="token string">'[\\/:*?"&lt;>|\r\n]+'</span>
    newTitle <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> <span class="token string">"_"</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span>
    <span class="token keyword">return</span> newTitle

<span class="token keyword">def</span> <span class="token function">download</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Downloading:'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'file exists.'</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">with</span> open<span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> file<span class="token punctuation">:</span>
                    file<span class="token punctuation">.</span>write<span class="token punctuation">(</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>HEADERS<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">with</span> open<span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> file<span class="token punctuation">:</span>
                file<span class="token punctuation">.</span>write<span class="token punctuation">(</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>HEADERS<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception<span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3>æå–è¿‡ç¨‹</h3><ol>
<li>å¯åŠ¨Blenderï¼Œå°†éšä¹‹å¯åŠ¨ä¸€ä¸ªCMDçª—å£ï¼Œå¯è§‚å¯Ÿæœ‰æ— æŠ¥é”™</li>
<li>ç‚¹å‡»<strong>File</strong> - <strong>Open</strong>ï¼Œæ‰“å¼€<code>Blender249.blend</code>ï¼Œç„¶åæŒ‰<kbd>Ctrl</kbd> + <kbd>U</kbd>ï¼Œè¿™æ ·ä»¥åå°±ä¸ç”¨é‡å¤æ­¤æ­¥äº†</li>
<li>å³é”®ç‚¹å‡»çª—å£å·¦ä¾§çš„Pythonä»£ç åŒºåŸŸï¼Œç„¶åç‚¹å‡»<strong>Execute Script</strong>æˆ–æŒ‰<kbd>Alt</kbd> + <kbd>P</kbd></li>
<li>åœ¨å‡ºç°çš„æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†ä¸­å¯¼å…¥æ­¤å‰ä¸‹è½½çš„<code>file.osgjs</code></li>
<li>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼ŒCMDçª—å£å°†åˆ·è¿‡å¤§é‡è§£å¯†æ“ä½œç›¸å…³ä¿¡æ¯ï¼Œå¹¶åœ¨è§†å›¾ä¸­æ˜¾ç¤ºè§£å¯†åçš„æ¨¡å‹</li>
<li>ç‚¹å‡»<strong>File</strong> - <strong>Export</strong>ï¼Œå°†è§£å¯†åçš„æ¨¡å‹æ–‡ä»¶å¯¼å‡ºä¸ºå…¶ä»–æ ¼å¼</li>
<li>è´´å›¾å’ŒåŠ¨ç”»æ•°æ®ä¸ä¼šè¢«ä¿å­˜ï¼Œå¯¼å‡ºçš„æ¨¡å‹å¯ä»¥åœ¨ä»»ä½•3Dåˆ¶ä½œè½¯ä»¶ä¸­è¿›è¡Œç¼–è¾‘</li>
</ol>
<p><img src="https://img.imjad.cn/images/2018/11/20/sp181117_203901.png" alt="Blenderé‡Œçš„æ™ºä¹ƒ"></p>
<h4>å¯èƒ½é‡åˆ°çš„é”™è¯¯</h4><h5>æç¤º<code>IndexError: list index out of range</code>ï¼Œå®Œæ•´æŠ¥é”™ç±»ä¼¼å¦‚ä¸‹ï¼š</h5><pre class="line-numbers language-shell"><code class="language-shell">Traceback (most recent call last):
  File "starter.py", line 1767, in openFile
  File "starter.py", line 1760, in Parser
  File "starter.py", line 1723, in osgParser
  File "C:\blender-2.49-win64\.blender\scripts\newGameLib\myLibraries\meshLib.py", line 670, in draw
  File "C:\blender-2.49-win64\.blender\scripts\newGameLib\myLibraries\meshLib.py", line 588, in addFaces
  File "C:\blender-2.49-win64\.blender\scripts\newGameLib\myLibraries\meshLib.py", line 822, in indicesToTriangleStrips
IndexError: list index out of range<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è§£å†³æ–¹æ³•ï¼šblenderå·¦ä¾§çš„Pythonä»£ç æ³¨é‡Šæ‰<code>330-351</code>è¡Œ</p>
<h2>çœ‹å›¾</h2><p><img src="https://img.imjad.cn/images/2018/11/20/sp181117_214136.png" alt="æ²¡ç©¿è¡£æœçš„æ™ºä¹ƒ"></p>
<p><img src="https://img.imjad.cn/images/2018/11/20/sp181117_214107.png" alt="åŠ ä¸Šè´´å›¾çš„æ™ºä¹ƒ"></p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    

    <script>
        var pub_date = 1542700320000;
    </script>
</div>
    <div class="footer"
     id="footer">
    <p>
        Copyright Â© 2020 <a class="flink"
           href="https://nocilol.me">æ¶é­”èè‰æ§</a> Â· Theme by <a class="flink"
           href="https://github.com/journey-ad/hexo-theme-geek">Geek</a>.
        <br>
        Made with <i class="fa fa-heart throb"
           style="color:#d43f57"></i> by <span class="author"
              itemprop="copyrightHolder">journey.ad</span>.
        <label class="el-switch el-switch-green el-switch-sm"
               style="vertical-align: sub;">
            <input type="checkbox"
                   name="switch"
                   id="update_style">
            <span class="el-switch-style"></span>
        </label>
    </p>
</div>

<a href="javascript:void(0);" class="back-to-top" target="_self"></a>

<input type="hidden"
       id="web_style"
       value="white">
<input type="hidden"
       id="valine_appid"
       value="CaQKuPQDfnfPFUkTw6MMt8ME-gzGzoHsz">
<input type="hidden"
       id="valine_appKey"
       value="uWuwGS1xiIwh3zHKENc7ubyL">
<script src='//cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js'></script>

    <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/libs/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/libs/highlight/highlight.pack.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@b3c899e0/js/js.js"></script>

<style type="text/css">
    .v * {
        /* color: #698fca; */
    }

    .v .vlist .vcard .vhead .vsys {
        color: #3a3e4a;
    }

    .v .vlist .vcard .vh .vmeta .vat {
        color: #638fd5;
    }

    .v .vlist .vcard .vhead .vnick {
        color: #6ba1ff;
    }

    .v a {
        color: #8696b1;
    }

    .v .vlist .vcard .vhead .vnick:hover {
        color: #669bfc;
    }

    .v .vcards .vcard .vhead .vnick {
        padding-left: 1px;
    }

    .v .vcontent .vemoji {
        max-width: 30px;
    }

    .v[data-class=v] p {
        color: inherit;
    }

</style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71903189-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-71903189-1');
</script>

</body>

</html>