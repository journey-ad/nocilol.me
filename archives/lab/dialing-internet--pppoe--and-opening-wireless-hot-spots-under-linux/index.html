<!DOCTYPE html>
<html lang="zh">
<!--
             -. .                                        
       _____   ',' ,                                    
     ,'     ,'   ', ',                                  
   ,'     ,'      |  |                                  
   \       \       |  |                                  
     \ /^\   \    ,' ,'                                  
           \   \ ,' ,'      L'Internationale,            
     / ~-.___\.-'  ,'            Sera le genre humain.   
   /   .______.- ~ \                                     
 /   /'          \   \                                   
 \./               \/'                                   
                                                         
-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="/favicon.png" type="image/png">
    <title>åœ¨linuxä¸‹æ‹¨å·ä¸Šç½‘(PPPoE)å’Œå¼€å¯æ— çº¿çƒ­ç‚¹ - æ¶é­”èè‰æ§</title>
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/css/style.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/libs/highlight/styles/monokai-sublime.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/libs/font-awesome/css/font-awesome.min.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/libs/zpix/zpix.css">
      <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/js/theme.js"></script>
    
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="æ¶é­”èè‰æ§" type="application/atom+xml">
</head>

<body id="bodyx" path="archives/lab/dialing-internet--pppoe--and-opening-wireless-hot-spots-under-linux/">
    <div class="hd posts">
    <a class="back" href="javascript:void(0);" target="_self"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <h1 class="post-title">åœ¨linuxä¸‹æ‹¨å·ä¸Šç½‘(PPPoE)å’Œå¼€å¯æ— çº¿çƒ­ç‚¹</h1>
    <hr>

    
        <div class="outdated-notify">
            æœ¬æ–‡å‘å¸ƒäº <span class="num">-</span> å¤©å‰ï¼Œæ–‡ä¸­æ‰€æè¿°çš„ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜æˆ–æ˜¯è¿‡æ—¶ï¼Œè¯·æ³¨æ„è¾¨åˆ«
        </div>
    

    <div class="post-content">
        <p><a href="http://beta.speedtest.net/result/6827922547" target="_blank" rel="noopener"><img src="https://img.imjad.cn/images/2017/11/30/Screenshot-20171130162258-742x288.png" alt="æµ‹é€Ÿç»“æœ" title="æµ‹é€Ÿç»“æœ"></a></p>
<h2>å‰è¨€</h2><p>æƒè¡¡å†ä¸‰åï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†åŠç†æ ¡å›­ç½‘ï¼Œè™½ç„¶æœ‰ç€ç§ç§é—®é¢˜ï¼Œå¦‚ç»‘å®šç½‘å¡MACåœ°å€ã€é™åˆ¶ç»ˆç«¯æ•°é‡(5ä¸ª)ã€æ™šé—´æ–­ç½‘ã€å¶å°”ä¸¢åŒ…ä¸¥é‡ç­‰ã€‚ä½†å°±ç›®å‰æ¥çœ‹ï¼Œè¿™ä¾ç„¶æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚æˆ‘æ ¡æ ¡å›­ç½‘æ‹¨å·æ–¹å¼ä¸ä¸€èˆ¬çš„PPPoEæ‹¨å·æ–¹å¼å¹¶æ— ä¸åŒï¼Œä¸éœ€å®¢æˆ·ç«¯ï¼Œå› æ­¤é…ç½®èµ·æ¥è¿˜ç®—æ–¹ä¾¿ã€‚<br>æ­¤å¤–æˆ‘çš„è·¯ç”±å™¨ç•™åœ¨äº†å®¶é‡Œï¼Œè€Œç›®å‰å¹¶æ— èµ„é‡‘è´­ç½®æ–°çš„è·¯ç”±å™¨ã€‚ä¸ºäº†è§£å†³å¤šä¸ªè®¾å¤‡éœ€è¦è”ç½‘å’Œæ²¡æœ‰è·¯ç”±å™¨ä¹‹é—´çš„çŸ›ç›¾ï¼Œæš‚æ—¶ä½¿ç”¨æ— çº¿ç½‘å¡å¼€å¯çƒ­ç‚¹ä»¥ä¾›è”ç½‘æ‰€ç”¨ã€‚<br>Windowsä¸‹é…ç½®ååˆ†æ–¹ä¾¿ï¼ŒLinuxä¸‹åˆ™éœ€è¦ä¸€äº›åŠ¨æ‰‹èƒ½åŠ›ï¼Œä»¥ä¸‹æ˜¯æŠ˜è…¾è®°å½•ï¼š</p>
<h2>PPPoEæ‹¨å·</h2><h3>å®‰è£…</h3><p>å®‰è£…<code>rp-pppoe</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># pacman -s rp-pppoe</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3>é…ç½®</h3><p>æ‰§è¡Œé…ç½®ç¨‹åºï¼ŒæŒ‰æç¤ºå¡«å…¥ç”¨æˆ·åã€å¯†ç ã€DNSã€ç½‘ç»œæ¥å£åã€é˜²ç«å¢™è§„åˆ™ç­‰ã€‚<br>ç½‘ç»œæ¥å£åå¯é€šè¿‡æ‰§è¡Œ<code>ifconfig</code>æŸ¥è¯¢åˆ°</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># pppoe-setup</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3>æ‹¨å·</h3><p>é…ç½®å®Œæˆä¹‹åå³å¯å¼€å§‹æ‹¨å·</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># pppoe-start</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3>æ–­å¼€è¿æ¥</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–­å¼€PPPoEè¿æ¥</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># pppoe-stop</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3>å¼€æœºè‡ªåŠ¨æ‹¨å·</h3><p>æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä»¥å®ç°è‡ªåŠ¨æ‹¨å·</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># systemctl enable adsl</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h3><h4>æ‹¨å·æˆåŠŸåä»æ— æ³•ä¸Šç½‘</h4><p>æ‰§è¡Œ<code>route</code>æŸ¥çœ‹è·¯ç”±è¡¨ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¿”å›ç»“æœä¸­åº”æœ‰å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash">Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         0.0.0.0         0.0.0.0         U     0      0        0 ppp0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>æ²¡æœ‰çš„è¯æ‰‹åŠ¨æ·»åŠ </p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># route add default dev ppp0</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ä¸€èˆ¬æƒ…å†µä¸‹æ­¤æ—¶å°±å¯æ­£å¸¸ä¸Šç½‘äº†ã€‚<br>ä½¿ç”¨ä»¥ä¸‹è„šæœ¬åœ¨PPPoEè¿æ¥æˆåŠŸåè‡ªåŠ¨æ·»åŠ è·¯ç”±è¡¨é¡¹ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token keyword">if</span> <span class="token function">ifconfig</span> ppp0  <span class="token operator">></span> /dev/null 2<span class="token operator">></span><span class="token operator">&amp;</span>1 <span class="token punctuation">;</span> <span class="token keyword">then</span>
    route del default
    route add default dev ppp0
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¿å­˜ä¸º<code>01-route.sh</code>ï¼Œæƒé™<code>root:root 755</code>ï¼Œæ”¾è‡³<code>/etc/ppp/ip-up.d</code>ç›®å½•å³å¯</p>
<h2>å¼€å¯æ— çº¿çƒ­ç‚¹</h2><p>ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œç®€åŒ–é…ç½®ï¼Œä¸é‡å¤é€ è½®å­ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨åˆ«äººå†™å¥½çš„å·¥å…·<a href="https://github.com/oblique/create_ap" target="_blank" rel="noopener">create_ap</a>ã€‚ä¸ºäº†æ„Ÿè°¢ä½œè€…ï¼Œä½ å¯ä»¥ç»™ä»–ä¸€é¢—ğŸŒŸ</p>
<h3>å®‰è£…è„šæœ¬</h3><p><a href="https://github.com/oblique/create_ap/blob/master/README.md" target="_blank" rel="noopener">README.md</a>å†™çš„å¾ˆæ¸…æ¥šï¼Œä¸å†èµ˜è¿°ã€‚<br>æˆ‘çš„ç³»ç»Ÿæ˜¯<a href="https://www.archlinux.org/" target="_blank" rel="noopener">Arch Linux</a>ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># pacman -S create_ap</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3>å¼€å¯</h3><p><a href="https://github.com/oblique/create_ap/blob/master/README.md" target="_blank" rel="noopener">README.md</a>ä¸­åˆ—ä¸¾äº†å‡ ç§ç»å…¸çš„ä½¿ç”¨æ–¹æ³•ã€‚å¤§éƒ¨åˆ†æ—¶é—´é‡Œï¼Œæˆ‘éœ€è¦çš„æ˜¯<a href="https://github.com/oblique/create_ap#wpa--wpa2-passphrase" target="_blank" rel="noopener">WPA + WPA2 passphrase</a><br>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># create_ap wlan0 eth0 name password</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>wlan0</code>å’Œ<code>eth0</code>æ›¿æ¢ä¸ºå¯¹åº”çš„ç½‘ç»œæ¥å£åï¼ŒåŒä¸Šï¼Œç½‘ç»œæ¥å£åå¯é€šè¿‡æ‰§è¡Œ<code>ifconfig</code>æŸ¥è¯¢åˆ°</p>
<h3>ä½œä¸ºæœåŠ¡å¯åŠ¨</h3><p>æœåŠ¡ä½¿ç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯<code>/etc/create_ad.conf</code>ï¼Œä¿®æ”¹å¿…è¦çš„å€¼å¦‚<code>SSID</code>å’Œ<code>PASSPHRASE</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># systemctl start create_ap</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3>å¼€æœºè‡ªåŠ¨å¼€å¯çƒ­ç‚¹</h3><p>æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä»¥å®ç°è‡ªåŠ¨å¼€å¯çƒ­ç‚¹</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># systemctl enable create_ap</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2>å‚è€ƒå†…å®¹</h2><p><a href="https://vvl.me/2017/09/Linux-PPPoE/" target="_blank" rel="noopener">åœ¨Linuxä¸Šæ‹¨å·ä¸Šç½‘(PPPoE)</a><br><a href="http://0x3f.org/post/problem-on-pppoe-connections-on-linux/" target="_blank" rel="noopener">Linuxä¸‹pppoeè¿æ¥å»ºç«‹åä»ä¸èƒ½ä¸Šç½‘çš„é—®é¢˜</a><br><a href="https://github.com/oblique/create_ap" target="_blank" rel="noopener">create_apçš„GitHubé¡¹ç›®é¡µ</a></p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    

    <script>
        var pub_date = 1511996460000;
    </script>
</div>
    <div class="footer"
     id="footer">
    <p>
        Copyright Â© 2020 <a class="flink"
           href="https://nocilol.me">æ¶é­”èè‰æ§</a> Â· Theme by <a class="flink"
           href="https://github.com/journey-ad/hexo-theme-geek">Geek</a>.
        <br>
        Made with <i class="fa fa-heart throb"
           style="color:#d43f57"></i> by <span class="author"
              itemprop="copyrightHolder">journey.ad</span>.
        <label class="el-switch el-switch-green el-switch-sm"
               style="vertical-align: sub;">
            <input type="checkbox"
                   name="switch"
                   id="update_style">
            <span class="el-switch-style"></span>
        </label>
    </p>
</div>

<a href="javascript:void(0);" class="back-to-top" target="_self"></a>

<input type="hidden"
       id="web_style"
       value="white">
<input type="hidden"
       id="valine_appid"
       value="CaQKuPQDfnfPFUkTw6MMt8ME-gzGzoHsz">
<input type="hidden"
       id="valine_appKey"
       value="uWuwGS1xiIwh3zHKENc7ubyL">
<script src='//cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js'></script>

    <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/libs/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/libs/highlight/highlight.pack.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/journey-ad/nocilol.me@72be5dad/js/js.js"></script>

<style type="text/css">
    .v * {
        /* color: #698fca; */
    }

    .v .vlist .vcard .vhead .vsys {
        color: #3a3e4a;
    }

    .v .vlist .vcard .vh .vmeta .vat {
        color: #638fd5;
    }

    .v .vlist .vcard .vhead .vnick {
        color: #6ba1ff;
    }

    .v a {
        color: #8696b1;
    }

    .v .vlist .vcard .vhead .vnick:hover {
        color: #669bfc;
    }

    .v .vcards .vcard .vhead .vnick {
        padding-left: 1px;
    }

    .v .vcontent .vemoji {
        max-width: 30px;
    }

    .v[data-class=v] p {
        color: inherit;
    }

</style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71903189-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-71903189-1');
</script>

</body>

</html>